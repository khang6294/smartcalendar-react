(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,a){e.exports=a(313)},154:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},215:function(e,t,a){},218:function(e,t,a){},309:function(e,t,a){},311:function(e,t,a){},313:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(9),l=a.n(r),c=(a(154),a(11)),i=(a(156),a(323)),s=a(316),u=a(317),m=(a(158),i.a.Header),d=o.a.memo(function(e){return o.a.createElement(m,{style:{background:"#0b66bd"}},o.a.createElement(s.a,{type:"flex"},o.a.createElement(u.a,{xs:10,sm:12,md:15,lg:18,xl:18},o.a.createElement("div",{id:"logo"},"SmartCalendar")),o.a.createElement(u.a,{xs:7,sm:6,md:4,lg:3,xl:3},o.a.createElement("div",{id:"menu-list"},o.a.createElement("div",{className:"menu-item-name"},"Hi, ",e.userInfo.name))),o.a.createElement(u.a,{xs:7,sm:6,md:4,lg:3,xl:3},o.a.createElement("div",{id:"menu-list"},o.a.createElement("div",{className:"menu-item-logout",onClick:function(){return e.onLogout()}},"Logout")))))}),f=i.a.Content,g=o.a.memo(function(e){return o.a.createElement(i.a,{className:"layout"},o.a.createElement(d,{userInfo:e.userInfo,onLogout:function(){return e.onLogout()}}),o.a.createElement(f,null,o.a.createElement("div",{style:{background:"#fff",padding:50}},e.children)))}),p=a(322),E=a(321),h=a(314),D=(a(215),o.a.memo(function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],l=a[1],i=function(){var t=e.toDoList.map(function(e){return e.toDo});return""===r?null:t.indexOf(r)>=0?(p.a.error("You already have this stuff to do!"),null):(e.newToDo(r),void l(""))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{type:"flex",justify:"start"},o.a.createElement(E.a,{className:"addToDo-field",value:r,onChange:function(e){l(e.target.value)},onKeyPress:function(e){13!==e.which&&13!==e.keyCode||i()}}),o.a.createElement(h.a,{onClick:i},"Add"),o.a.createElement(h.a,{onClick:function(){e.onSave(),p.a.success("SAVED!",1)},disabled:!e.edit},"Save")),o.a.createElement("br",null),o.a.createElement(s.a,{type:"flex",justify:"start"},e.edit?o.a.createElement("p",{style:{color:"red"}},"Please click SAVE button for new changes"):null))})),v=a(319),b=a(24),O=a(324),k=(a(218),function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{className:"todo-list",bordered:!0,dataSource:e.toDoList,locale:{emptyText:"You have nothing to do!"},renderItem:function(t){return o.a.createElement("div",null,o.a.createElement(v.a.Item,{style:t.completed?{opacity:.3}:{},actions:[o.a.createElement(b.a,{type:"delete",onClick:function(){return e.deleteItem(t.toDo)}})]},o.a.createElement(v.a.Item.Meta,{title:t.toDo,description:o.a.createElement(O.a,{checked:t.completed,onChange:function(a){return function(t,a){e.completeItem({toDo:a.toDo,completed:t.target.checked})}(a,t)}},"Complete")})))}}))}),S=a(326),y=a(325),j=a(320),I=a(15),L=a.n(I),w=o.a.memo(function(e){var t=Object(n.useState)(L()(Date.now())),a=Object(c.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(L()(Date.now())),s=Object(c.a)(i,2),u=s[0],m=s[1],d=e.toDoList.filter(function(e){return!1===e.completed});return o.a.createElement("div",null,o.a.createElement(y.a,{message:"You selected date: ".concat(u&&u.format("YYYY-MM-DD"))}),o.a.createElement("br",null),o.a.createElement(y.a,{message:"You have ".concat(d.length<=1?"".concat(d.length," stuff"):"".concat(d.length," stuffs"),"  to do")}),o.a.createElement(j.a,{fullscreen:!1,value:r,onSelect:function(t){l(t),m(t),e.dateSelected(t.format("YYYY-MM-DD"))},onPanelChange:function(e){l(e)},dateCellRender:function(t){var a=function(t){var a=e.toDoAndDate.map(function(e){return e.dateWork}),n=L()(t).format("YYYY-MM-DD"),o=[];return a.indexOf(n)>-1&&(o=e.toDoAndDate[a.indexOf(n)].toDoList.filter(function(e){return!1===e.completed})),o}(t);return o.a.createElement(S.a,{count:a.length,offset:[18,-20]})}}))}),N=(a(243),a(30)),C=a(40),x=a(52),T=a.n(x),W=a(50),Y=a(318),A=Y.a.Item,q=Y.a.create()(function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(c.a)(t,2),r=a[0],l=a[1],i=function(e,t){l(Object(C.a)({},r,Object(W.a)({},e,t)))},s=e.form.getFieldDecorator;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"auth-background"}),o.a.createElement("div",{className:"logo"},"Smart Calendar"),o.a.createElement(Y.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields(function(t,a){t||e.getLoginInfo(a)})},className:"login-form"},o.a.createElement("h1",{className:"welcome"},"Login"),o.a.createElement(A,{className:"login-field"},o.a.createElement("h5",{className:"login-field-name"},"EMAIL"),s("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(o.a.createElement(E.a,{className:"login-input",prefix:o.a.createElement(b.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",onChange:i}))),o.a.createElement(A,{className:"login-field"},o.a.createElement("h5",{className:"login-field-name"},"PASSWORD"),s("password",{rules:[{required:!0,message:"Please input your password!"}]})(o.a.createElement(E.a,{className:"login-input",prefix:o.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",onChange:i}))),o.a.createElement(A,{className:"login-btn"},o.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Login")),o.a.createElement("div",{className:"register"},"Need an account?"," ",o.a.createElement("div",{className:"login-link",onClick:function(){e.onToggleToRegister()}},"Register"))))}),M=Y.a.Item,P=Y.a.create()(function(e){var t=Object(n.useState)({name:"",email:"",password:""}),a=Object(c.a)(t,2),r=a[0],l=a[1],i=function(e,t){l(Object(C.a)({},r,Object(W.a)({},e,t)))},s=e.form.getFieldDecorator;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"auth-background"}),o.a.createElement("div",{className:"logo"},"Smart Calendar"),o.a.createElement(Y.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields(function(t,a){t||e.getSignUpInfo(a)})},className:"register-form"},o.a.createElement("h1",{className:"welcome"},"Register"),o.a.createElement(M,{className:"login-field"},o.a.createElement("h5",{className:"login-field-name"},"FULL NAME"),s("name",{rules:[{required:!0,message:"Please input your full name!"}]})(o.a.createElement(E.a,{className:"login-input",prefix:o.a.createElement(b.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Full name",onChange:i}))),o.a.createElement(M,{className:"login-field"},o.a.createElement("h5",{className:"login-field-name"},"EMAIL"),s("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(o.a.createElement(E.a,{type:"email",className:"login-input",prefix:o.a.createElement(b.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"example@example.com",onChange:i}))),o.a.createElement(M,{className:"login-field"},o.a.createElement("h5",{className:"login-field-name"},"PASSWORD"),s("password",{rules:[{required:!0,message:"Please input your password!"}]})(o.a.createElement(E.a,{className:"login-input",prefix:o.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",onChange:i}))),o.a.createElement(M,{className:"login-btn"},o.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Sign me up")),o.a.createElement("div",{className:"register"},"Had an account already?"," ",o.a.createElement("div",{className:"login-link",href:!0,onClick:function(){e.onToggleToLogin()}},"Login"))))}),F=(a(309),function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],l=a[1];Object(n.useEffect)(function(){e.userCreation&&l(!1)},[e.userCreation]);var i=null;return i=r?o.a.createElement(P,{onToggleToLogin:function(){l(!1)},getSignUpInfo:function(t){return e.getSignUpInfo(t)}}):o.a.createElement(q,{onToggleToRegister:function(){l(!0)},getLoginInfo:function(t){return e.getLoginInfo(t)}}),o.a.createElement("div",{className:e.authLoading?"auth-container":null},i)}),R=(a(311),function(e){return o.a.createElement("div",{className:"loader"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))}),U=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dateWork:L()(Date.now()).format("YYYY-MM-DD"),toDoList:[]},t=Object(n.useState)(e.toDoList),a=Object(c.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)(e.dateWork),i=Object(c.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)([{dateWork:s,toDoList:o,editted:!1}]),d=Object(c.a)(m,2),f=d[0],g=d[1],E=Object(n.useState)(!1),h=Object(c.a)(E,2),D=h[0],v=h[1],b=Object(n.useState)([]),O=Object(c.a)(b,2),k=O[0],S=O[1],y=Object(n.useState)({}),j=Object(c.a)(y,2),I=j[0],w=j[1],x=Object(n.useState)(!1),W=Object(c.a)(x,2),Y=W[0],A=W[1],q=Object(n.useState)(!1),M=Object(c.a)(q,2),P=M[0],F=M[1],R=Object(n.useState)(!1),U=Object(c.a)(R,2),B=U[0],H=U[1];Object(n.useEffect)(function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");if(e&&t)if(new Date(t)<=new Date)J();else{var a=localStorage.getItem("userId"),n=localStorage.getItem("name"),o=new Date(t).getTime()-(new Date).getTime();A(!0),w({token:e,userId:a,name:n}),z(o)}},[Y]),Object(n.useEffect)(function(){if(Y){var e={query:'\n                    {\n                        works(creator:"'.concat(I.userId,'"){\n                            dateWork\n                            toDoList{\n                                toDo\n                                completed\n                            }\n                        }\n                    }\n                ')};T.a.post("http://localhost:8080/graphql",e,{headers:{Authorization:"Bearer "+I.token}}).then(function(e){var t=e.data.data.works.map(function(e){return Object(C.a)({},e,{editted:!1})});g(t),r(t.filter(function(e){return e.dateWork===s})[0].toDoList);var a=e.data.data.works.map(function(e){return e.dateWork});S(a)}).catch(function(e){return console.log(e)})}},[Y]);var J=function(){localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),localStorage.removeItem("userId"),w({}),A(!1)},z=function(e){setTimeout(function(){J()},e)};return{userInfo:I,userCreation:B,isAuth:Y,login:function(e){var t={query:'\n                {\n                    login(email:"'.concat(e.email,'",password:"').concat(e.password,'"){\n                        token\n                        userId\n                        name\n                    }\n                  }\n            ')};F(!0),T.a.post("http://localhost:8080/graphql",t).then(function(e){w(e.data.data.login),A(!0),F(!1),localStorage.setItem("token",e.data.data.login.token),localStorage.setItem("userId",e.data.data.login.userId),localStorage.setItem("name",e.data.data.login.name);var t=new Date((new Date).getTime()+36e5);localStorage.setItem("expiryDate",t.toISOString()),z(36e5)}).catch(function(e){F(!1),p.a.error(e.response.data.errors[0].message)})},logout:J,signup:function(e){var t={query:'\n            mutation{\n                createUser(userInput:{email:"'.concat(e.email,'",name:"').concat(e.name,'",password:"').concat(e.password,'"}){\n                  email\n                  _id\n                }\n              }\n              \n            ')};T.a.post("http://localhost:8080/graphql",t).then(function(e){H(!0),p.a.success("Create user successfully")}).catch(function(e){return p.a.error(e.response.data.errors[0].message)})},authLoading:P,toDoAndDate:f,toDoList:o,addToDo:function(e){for(var t=Object(N.a)(f),a=0;a<t.length;a++)s===t[a].dateWork&&(t[a].toDoList.push({toDo:e,completed:!1}),g(t),r(t[a].toDoList),t[a].editted=!0,v(t[a].editted))},removeToDo:function(e){for(var t=Object(N.a)(f),a=0;a<t.length;a++)if(s===t[a].dateWork){for(var n=Object(N.a)(t[a].toDoList),o=0;o<n.length;o++)e===n[o].toDo&&n.splice(o,1);t[a].toDoList=Object(N.a)(n),r(n),t[a].editted=!0,v(t[a].editted)}g(t)},selectDate:function(e){u(e);var t=Object(N.a)(f);f.map(function(e){return e.dateWork}).indexOf(e)<0&&(t.push({dateWork:e,toDoList:[]}),g(t),r([]));for(var a=0;a<f.length;a++)e===f[a].dateWork&&(r(f[a].toDoList),v(f[a].editted))},completeToDo:function(e){for(var t=Object(N.a)(f),a=0;a<t.length;a++)if(s===t[a].dateWork){for(var n=Object(N.a)(t[a].toDoList),o=0;o<n.length;o++)e.toDo===n[o].toDo&&(n[o]=Object(C.a)({},e));t[a].toDoList=Object(N.a)(n),t[a].editted=!0,r(n),v(t[a].editted)}g(t)},onSave:function(){var e,t=JSON.stringify(o).replace(/"([^(")"]+)":/g,"$1:");e=k.indexOf(s)>-1?{query:'\n                mutation {\n                    updateWork(dateWork:"'.concat(s,'", workInput:{\n                          dateWork:"').concat(s,'",\n                          toDoList: ').concat(t,"\n                        }){\n                      dateWork\n                      toDoList{\n                        toDo\n                        completed\n                      }\n                    }\n                  }\n                ")}:{query:'\n                mutation {\n                    createWork(workInput:{\n                          dateWork:"'.concat(s,'",\n                          toDoList:').concat(t," \n                        }){\n                        dateWork\n                        toDoList{\n                            toDo\n                            completed\n                      }\n                    }\n                  }\n                ")},T.a.post("http://localhost:8080/graphql",e,{headers:{Authorization:"Bearer "+I.token}}).then(function(e){f.filter(function(e){return e.dateWork===s})[0].editted=!1,v(f.filter(function(e){return e.dateWork===s})[0].editted)}).catch(function(e){return console.log(e.response.data)})},edit:D}}(),a=t.toDoAndDate,r=t.userInfo,l=t.authLoading,i=t.toDoList,s=t.isAuth,u=t.userCreation,m=t.signup,d=t.login,f=t.logout,E=t.edit,h=t.addToDo,v=t.removeToDo,b=t.selectDate,O=t.completeToDo,S=t.onSave,y=null,j=Object(n.useState)(!1),I=Object(c.a)(j,2),x=I[0],W=I[1];return Object(n.useEffect)(function(){W(!0)},[x]),!s&&l&&(y=o.a.createElement(o.a.Fragment,null,o.a.createElement(R,null),o.a.createElement(F,{getLoginInfo:function(e){return d(e)},getSignUpInfo:function(e){return m(e)},userCreation:u,authLoading:l}))),s?y=o.a.createElement(g,{userInfo:r,onLogout:f},o.a.createElement(w,{toDoAndDate:a,dateSelected:function(e){return b(e)},toDoList:i}),o.a.createElement(D,{newToDo:function(e){return h(e)},toDoList:i,onSave:S,edit:E}),o.a.createElement(k,{toDoList:i,deleteItem:function(e){return v(e)},completeItem:function(e){return O(e)}})):s||!x||l||(y=o.a.createElement(F,{getLoginInfo:function(e){return d(e)},getSignUpInfo:function(e){return m(e)},userCreation:u,authLoading:l})),o.a.createElement("div",{className:"App"},y)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[149,2,1]]]);
//# sourceMappingURL=main.62b6d936.chunk.js.map